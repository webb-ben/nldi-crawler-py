name: test âš™ï¸

on: [ push, pull_request ]

jobs:
  main:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    - name: install nox ğŸ“¦
      uses: wntrblm/nox@2022.8.7
    - name: install poetry ğŸ“¦
      uses: snok/install-poetry@v1
    - name: run nldi-db
      run: |
        cd tests
        docker-compose up -d
    - name: install nldi-crawler
      run: |
        poetry install
    - name: run integration tests âš™ï¸
      run: |
        nox -s test
    - name: run lint âš™ï¸
      run: |
        nox -s lint
